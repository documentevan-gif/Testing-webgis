<style>
    .action-button {
        width: 100%;
        border-radius: 8px;
        padding: 10px;
        font-size: 0.85rem;
        font-weight: 600;
        margin-bottom: 10px;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }
    .btn-print { background: #3699ff; color: white; border: none; }
    .btn-print:hover { background: #187de4; }
    .btn-download { background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); }
    .btn-download:hover { background: rgba(255,255,255,0.2); }
</style>

<aside id="sidebar">
    <div class="sidebar-header">
        <h4>CLOCKBOARD ZONE</h4>
        <p class="small text-muted mb-0">WebGIS Analysis Surakarta</p>
    </div>
    
    <div class="sidebar-content">
        <div class="legend-panel">
            <span class="legend-title"><i class="fas fa-layer-group me-2"></i>Legenda Peta</span>
            <div id="sidebar-legend-content"></div>
        </div>

        <div class="mt-4">
            <span class="legend-title text-info"><i class="fas fa-tools me-2"></i>Tools & Export</span>
            <button class="action-button btn-print" onclick="window.print();">
                <i class="fas fa-print"></i> Print Map (PDF)
            </button>
            
            <div class="dropdown">
                <button class="action-button btn-download dropdown-toggle" type="button" data-bs-toggle="dropdown">
                    <i class="fas fa-download"></i> Download Data
                </button>
                <ul class="dropdown-menu dropdown-menu-dark w-100">
                    <li><a class="dropdown-item small" href="#" onclick="downloadData(json_MultiCriteriaEvaluationSurakarta_3, 'MCE_Surakarta.json')">Data MCE (GeoJSON)</a></li>
                    <li><a class="dropdown-item small" href="#" onclick="downloadData(json_AnalisisClockboardZoneSurakarta_4, 'Clockboard_Zone.json')">Data Clockboard (GeoJSON)</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="sidebar-footer">
        Developed by Evan &copy; 2025
    </div>
</aside>

<script>
    // Fungsi untuk Download Data Vektor ke format GeoJSON
    function downloadData(jsonData, filename) {
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(jsonData));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", filename);
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
    }

    // Penambahan CSS khusus Print agar Sidebar hilang saat mencetak
    var stylePrint = document.createElement('style');
    stylePrint.innerHTML = `
        @media print {
            #sidebar { display: none !important; }
            #map { width: 100vw !important; height: 100vh !important; position: absolute; left: 0; top: 0; }
            .leaflet-control-zoom, .leaflet-control-layers, .leaflet-control-measure { display: none !important; }
        }
    `;
    document.head.appendChild(stylePrint);
</script>
